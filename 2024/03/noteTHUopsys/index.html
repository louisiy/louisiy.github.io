


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>  操作系统笔记 |    Louisiy.</title>
  <meta name="description" content="Blog">
  <!-- 标签页图标 -->
  
  <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
  

  <!-- 图标库 -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
  <!-- 动画库 -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fushaolei/cdn-white@1.0/css/animate.css"/>
  
  <!-- css文件 -->
  
<link rel="stylesheet" href="/css/white.css">

  <!-- 代码高亮 -->
  
    
      
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.1.1/styles/github.css">

    
  
<meta name="generator" content="Hexo 7.0.0-rc2"></head>


<body>

<div class="menu-outer">
    <div class="menu-inner">
      <div class="menu-site-name  animate__animated  animate__fadeInUp">
        <a href="/">
          Louisiy.
        </a>
        
      </div>
      <div class="menu-group">
        <ul class="menu-ul">
        
          <a href="/" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              HOME
            </li>
          </a>
        
          <a href="/archives" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              BLOG
            </li>
          </a>
        
          <a href="/tags" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              TAGs
            </li>
          </a>
        
        
        
        <a href="/search">
          <li class="menu-li  animate__animated  animate__fadeInUp">
            <i class="ri-search-line"></i>
          </li>
        </a>
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="mobile-menu">
            <i class="ri-menu-line"></i>
          </li>
        
        </ul>

      </div>

    </div>
</div>
<div id="mobile-main" class="animate__animated  animate__fadeIn">
  <div class="mobile-menu-inner">
    <div class="mobile-menu-site-name animate__animated  animate__fadeInUp">
      <a href="/">
        Louisiy.
      </a>
    </div>
    <div class="mobile-menu-group" id="mobile-close">
      <i class="ri-close-line"></i>
    </div>

  </div>

  <div class="mobile-menu-div">
  
    <a href="/" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>HOME</span>
      </div>
    </a>
  
    <a href="/archives" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>BLOG</span>
      </div>
    </a>
  
    <a href="/tags" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>TAGs</span>
      </div>
    </a>
  
  
    <a href="/search">  
      <div class="mobile-menu-child  animate__animated  animate__fadeInUp">
        <i class="ri-search-line"></i>
      </div>
    </a>
    
  </div>


</div>

<div class="body-outer">
  <div class="body-inner">
    
<article class="post-inner">
  <div class="post-content-outer">
    <div class="post-intro">
      <div class="post-title animate__animated  animate__fadeInUp">操作系统笔记</div>
      <div class="meta-intro animate__animated  animate__fadeInUp">3月 04 2024</div>
      
    </div>
    <div class="post-content-inner">
      <div class="post-content-inner-space">

      </div>
      <div class="post-content-main animate__animated  animate__fadeInUp">
        <!-- top型目录 -->
        
        <h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h3><p>指令是计算机运行的最小的功能单元，是指挥计算机硬件运行的命令</p>
<ul>
<li>算术运算指令</li>
<li>逻辑运算指令</li>
<li>移位操作指令</li>
<li>数据传送指令</li>
<li>输入输出指令</li>
<li>转移指令等</li>
</ul>
<p>操作码 + 操作数</p>
<p>在硬件和应用软件之间引入操作系统</p>
<ul>
<li>管理系统的各个部件，使之能正常运转；</li>
<li>给上层的应用软件提供一个易于理解和编程的接口</li>
</ul>
<h3 id="操作系统发展历史"><a href="#操作系统发展历史" class="headerlink" title="操作系统发展历史"></a>操作系统发展历史</h3><ul>
<li>1946-1950<ul>
<li>机器语言，纸带或卡片</li>
</ul>
</li>
<li>50年代末-60年代中<ul>
<li>批处理管理程序</li>
<li>串行执行，单道批处理</li>
<li>60年代初发展了通道与中断技术</li>
</ul>
</li>
<li>60年代中-70年代中<ul>
<li>现代意义上的操作系统的出现</li>
<li>多道批处理系统</li>
</ul>
</li>
<li>70年代中-至今<ul>
<li>分时系统<ul>
<li>CTSS</li>
<li>MULTICS</li>
<li>UNIX</li>
</ul>
</li>
</ul>
</li>
<li>个人计算机操作系统</li>
</ul>
<h3 id="操作系统类型"><a href="#操作系统类型" class="headerlink" title="操作系统类型"></a>操作系统类型</h3><ul>
<li>批处理操作系统（多道批处理）</li>
<li>分时操作系统</li>
<li>实时操作系统</li>
<li>嵌入式系统</li>
<li>个人计算机操作系统</li>
<li>分布式操作系统</li>
</ul>
<h3 id="操作系统需要的硬件特性"><a href="#操作系统需要的硬件特性" class="headerlink" title="操作系统需要的硬件特性"></a>操作系统需要的硬件特性</h3><h4 id="受保护的指令"><a href="#受保护的指令" class="headerlink" title="受保护的指令"></a>受保护的指令</h4><ul>
<li><p>对某些硬件资源直接访问的指令</p>
</li>
<li><p>对内存管理状态进行操作的指令</p>
</li>
<li><p>某些特殊的状态位的设置指令</p>
</li>
<li><p>停机指令</p>
</li>
</ul>
<p>根据运行程序对资源和机器指令的使用权限，把处理器设置为不同状态</p>
<ul>
<li>管态：操作系统的管理程序运行时的状态，较高的特权级别，又称为特权态、系统态、内核态，处于该状态时可以执行所有的指令（包括特权指令）、使用所有的资源，并具有改变处理器状态的能力</li>
<li>目态：用户程序运行时的状态，较低的特权级别，又称为普通态（普态）、用户态。在此状态下禁止使用特权指令，不能直接使用系统资源与改变CPU状态，并且只能访问用户程序所在的存储空间</li>
</ul>
<p>有的系统分为核心状态，管理状态和用户程序状态（目标状态）三种</p>
<p>程序状态字PSW (Program Status Word )一个专门的寄存器，用来指示处理器的状态，包括</p>
<ul>
<li>CPU的工作状态码</li>
<li>条件码</li>
<li>中断屏蔽码</li>
</ul>
<p>
        <span class="lazyload-img-span">
        <img   
           data-src="https://cdn.jsdelivr.net/gh/louisiy/ImageStorage/img/image-20240311204447522.png" >
        </sapn>
      </p>
<h4 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h4><p>用户程序通过特殊的访管指令，来请求操作系统为其提供某种功能的服务</p>
<ul>
<li>当CPU执行访管指令时，即引起访管中断；</li>
<li>处理器保存中断点的程序执行上下文环境（PSW,    PC和其他的一些寄存器），CPU切换到内核态。</li>
<li>中断处理程序开始工作，调用相应的系统服务；</li>
<li>中断处理结束后，恢复被中断程序的上下文环境，CPU恢复为用户态，回到中断点继续执行。</li>
</ul>
<h4 id="内存保护"><a href="#内存保护" class="headerlink" title="内存保护"></a>内存保护</h4><ul>
<li>防止一个用户程序去访问其他用户 程序的数据；</li>
<li>保护操作系统免受用户程序的破坏。</li>
</ul>
<p>最简单的做法：基址寄存器和边界寄存器。在开始运行一个程序时，由操作系统负责给基址寄存器和边界寄存器设置相应的值</p>
<p>虚拟存储技术：把内存和外存结合起来使用，硬件提供虚、实地址映射的机制。</p>
<h4 id="中断机制"><a href="#中断机制" class="headerlink" title="中断机制"></a>中断机制</h4><ul>
<li>同步中断：指当CPU正在执行指令的时候，由CPU的控制单元所发出的中断，也称为“异常”<ul>
<li>CPU检测到的异常，包括：错误Fault、陷阱Trap和中止Abort，例如：算术溢出、被零除、用户态下使用了特权指令等；</li>
<li>程序设定的异常，即程序员通过int、int3等指令来发出的中断请求，也称为软中断，主要用来实现系统调用服务。</li>
</ul>
</li>
<li>异步中断：指由其他的硬件设备在任意的时刻所发出的中断，简称为“中断” ；<ul>
<li>可屏蔽中断，即I&#x2F;O中断，它是当外部设备或通道操作正常结束或发生错误时所发生的中断。例如：打印机打印完成、缺纸，读磁盘时驱动器中没有磁盘等；</li>
<li>不可屏蔽中断，例如：由掉电、存储器校验错等硬件故障引起的硬件中断；</li>
</ul>
</li>
</ul>
<p>每一个中断或异常都用一个0－255之间的整数来标识，称为中断向量，系统根据中断向量，来为每一个中断或异常指定相应的处理程序</p>
<h4 id="I-x2F-O系统"><a href="#I-x2F-O系统" class="headerlink" title="I&#x2F;O系统"></a>I&#x2F;O系统</h4><p>完成计算机系统中信息的输入输出功能</p>
<h4 id="时钟操作"><a href="#时钟操作" class="headerlink" title="时钟操作"></a>时钟操作</h4><p>时钟是操作系统运行时必不可少的硬件设施，在操作系统中需要时钟支持的工作有：</p>
<ul>
<li>在分时系统中，间隔时钟实现进程间按时间片轮转；</li>
<li>在实时系统中，按要求的间隔输出正确的时间信号给实时的控制设备；</li>
<li>记录用户和系统所需的绝对时间（年、月、日、时、分、秒）。</li>
</ul>
<h2 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h2><h3 id="进程-process"><a href="#进程-process" class="headerlink" title="进程 process"></a>进程 process</h3><h4 id="前置知识"><a href="#前置知识" class="headerlink" title="前置知识"></a>前置知识</h4><p>CPU</p>
<p>
        <span class="lazyload-img-span">
        <img   
           data-src="https://cdn.jsdelivr.net/gh/louisiy/ImageStorage/img/image-20240311192818883.png" >
        </sapn>
      </p>
<ul>
<li>控制单元<ul>
<li>能够正确并且自动地连续执行指令</li>
<li>能正确并分步完成每一条指令的功能读取指令、分析指令、控制执行</li>
<li>响应并处理中断</li>
</ul>
</li>
<li>执行单元<ul>
<li>CPU的“计算器”</li>
<li>分为不同的功能部件，包括算术逻辑单元（ALU，+-*&#x2F;）、移位器、乘法器、除法器、分支单元等</li>
<li>来自控制单元的信号选择不同的功能部件</li>
</ul>
</li>
<li>寄存器组<ul>
<li>General-purpose register</li>
<li>Segment register</li>
<li>EFLAGS register</li>
<li>EIP</li>
</ul>
</li>
</ul>
<p>虚拟&#x2F;物理计算机</p>
<ul>
<li>虚拟CPU</li>
<li>虚拟内存<ul>
<li>栈</li>
<li>堆</li>
<li>静态数据</li>
<li>代码</li>
</ul>
</li>
</ul>
<h4 id="进程基本"><a href="#进程基本" class="headerlink" title="进程基本"></a>进程基本</h4><p>process &#x3D; program in execution</p>
<p>一个进程应该包括：</p>
<ul>
<li>程序的代码；</li>
<li>程序的数据；</li>
<li>CPU寄存器的值，如PC，用来指示下一条将运行     的指令、通用寄存器等；</li>
<li>堆、栈；</li>
<li>一组系统资源（如地址空间、打开的文件）</li>
</ul>
<p>总之，进程包含了正在运行的一个程序的所有状态信息。</p>
<p>栈Stack</p>
<ul>
<li>只允许在一端插入和删除。允许插入和删除的一端称为栈顶 (top)，另一端称为栈底 (bottom)</li>
<li>特点：后进先出(LIFO)</li>
<li>栈的主要操作<ul>
<li>进栈 Push</li>
<li>出栈 Pop</li>
</ul>
</li>
<li>栈的用途<ul>
<li>用于暂存功能，在程序运行时保存运行上下文信息</li>
<li>在函数调用发生时，保存被调用函数的局部变量和形参</li>
</ul>
</li>
</ul>
<p>堆Heap</p>
<ul>
<li>内存中的一块空间，用于动态分配；</li>
<li>在C语言中，通过malloc来申请动态内存空间，通过free来释放；</li>
<li>使用不当可能导致内存泄漏。</li>
</ul>
<h4 id="进程的特性"><a href="#进程的特性" class="headerlink" title="进程的特性"></a>进程的特性</h4><ul>
<li>动态性：程序的运行状态在变，PC、寄存器、堆和栈等；</li>
<li>独立性：是一个独立的实体，是计算机系统资源的使用单位。每个进程在一个“虚拟计算机”上运行，每个进程都有“自己”的PC和内部状态，运行时独立于其他的进程（虚拟PC和物理PC）；</li>
<li>并发性：从宏观上看各进程是同时独立运行的</li>
</ul>
<h4 id="进程的创建"><a href="#进程的创建" class="headerlink" title="进程的创建"></a>进程的创建</h4><p>引起进程创建的三个主要事件：</p>
<ul>
<li>系统初始化时；</li>
<li>在一个正在运行的进程当中，执行了创建进程的系统调用；</li>
<li>用户请求创建一个新进程。</li>
</ul>
<p>从技术上来说，只有一种创建进程的方法，即在一个已经存在的进程（用户进程或系统<br>进程）当中，通过系统调用来创建一个新的进程。</p>
<ul>
<li>Unix：<code>fork</code>函数；</li>
<li>Windows：<code>CreateProcess</code>函数;</li>
</ul>
<h4 id="进程的状态"><a href="#进程的状态" class="headerlink" title="进程的状态"></a>进程的状态</h4><p>进程的三种基本状态：</p>
<ul>
<li>运行状态（Running）：进程占有CPU，并在CPU上运行。处于此状态的进程数目小于等于CPU的数目。</li>
<li>就绪状态（Ready）：进程已经具备运行条件，但由于CPU忙暂时不能运行，只要分得CPU即可执行；</li>
<li>阻塞状态（Blocked）：指进程因等待某种事件的发生而暂时不能运行的状态（如I&#x2F;O操作或进程同步）,此时，即使CPU空闲，该进程也不能运行。</li>
</ul>
<p>进程转换</p>
<ul>
<li>运行 –&gt; 阻塞<ul>
<li>等待I&#x2F;O的结果</li>
<li>等待某一进程提供输入</li>
</ul>
</li>
<li>运行 –&gt; 就绪<ul>
<li>运行进程用完了时间片</li>
<li>运行进程被中断，因为一高优先级进程处于就绪状态</li>
</ul>
</li>
<li>就绪 –&gt; 运行<ul>
<li>调度程序选择一个新的进程运行</li>
</ul>
</li>
<li>阻塞 –&gt; 就绪<ul>
<li>当所等待的事件发生时</li>
</ul>
</li>
</ul>
<h3 id="线程-thread"><a href="#线程-thread" class="headerlink" title="线程 thread"></a>线程 thread</h3><h3 id="进程间通信"><a href="#进程间通信" class="headerlink" title="进程间通信"></a>进程间通信</h3><h3 id="进程调度"><a href="#进程调度" class="headerlink" title="进程调度"></a>进程调度</h3>
        <!-- 分类文章 -->
        
      </div>
      <div class="post-content-inner-space">
        
          <div class="space-toc-main animate__animated  animate__fadeInUp">
            <ol class="space-toc"><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="space-toc-text">概述</span></a></li><li class="space-toc-item space-toc-level-2"><a class="space-toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86"><span class="space-toc-text">进程管理</span></a></li></ol>
           </div>
        
      </div>
   </div>
    <!-- 评论 -->
    
  </div>
</article>
  </div>
</div>



<!-- 如果是home模式的话，不在首页就显示footer，如果不是home模式的话 所有都显示footer -->

  <div class="footer-outer animate__animated  animate__fadeInUp">
    <div class="footer-inner">
    <div class="footer-text">
    <p>Keep making progress and growing stronger!</p>

    </div>
    <div class="footer-contact">
    <ul class="footer-ul">
        
        <li class="footer-li">
            <a href="https://github.com/FuShaoLei/hexo-theme-white" target="_blank">
                <i class="ri-github-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="mailto:1563250958@qq.com" target="_blank">
                <i class="ri-mail-line"></i>
            </a>
        </li>
        
    </ul>
    </div>
    </div>
</div>






<script src="/js/white.js"></script>



    
      
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js"></script>

      <script>hljs.initHighlightingOnLoad();</script>
    

</body>
</html>
